function _doSendSms() {
    if (phonenumberVAlidator($("#msisdn").val())) {
        $sfr.ajax($("#urlDownloadAppMobile").val() + $("#msisdn").val() + "#sfrclicid= EC_mire_lien-telechargement", {
            method: 'GET',
        })
            .then(
                function success(data) {
                    printMsg(data);
                },
                function fail(data, status) {
                    printMsg(data);
                }
            );
    } else {
        var data;
        data = {
            "status": 0,
            "msg": 'Veuillez saisir un numéro de téléphone valide'
        };
        printMsg(data);
    }
}

function onEnterMsisdn(e) {
    var charCode = (e.which) ? e.which : e.keyCode
    if (e.keyCode == 13) {
        _doSendSms();
        return true;
    } else if (charCode > 31 && (charCode < 48 || charCode > 57)) {
        return false;
    }


}

function phonenumberVAlidator(phoneNumer) {
    var phoneno = /^[0-9]{10}$/;
    if ((phoneNumer.match(phoneno))) {
        return true;
    }
    else {
        return false;
    }
}


function printMsg(data) {
    if (data != null && !isBlank(data) && !isBlank(data)) {
        $('#msgResponse').html(data.msg);
        switch (data.status) {
            case 0:
                $('#msgStatus').css("background", "#e70059");
                break;
            case 1:
                $('#msgStatus').css("background", "red");
                break;
            case 2:
                $('#msgStatus').css("background", "#23b5b7");
                break;
            default:

                break;
        }
    } else {
        $('#msgResponse').html('une erreur est survenue merci de réessayer ultérieurement');
        $('#msgStatus').css("background", "red");
    }


}

function isEmpty(str) {
    return (!str || 0 === str.length);
}

function isBlank(str) {
    return (!str || /^\s*$/.test(str));
}
